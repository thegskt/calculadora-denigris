<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora De Nigris</title>
  <link rel="icon" type="image/png" href="Imagens/icon.png"/>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- CABEÃ‡ALHO FIXO -->
  <header class="main-header">
    <div class="logo-menu">
      <img src="Imagens/Mercedes-Logo.png" alt="Mercedes-Benz Logo">
      <img src="Imagens/Logo_De Nigris Branco.png" alt="De Nigris Logo" class="logo-denigris">
    </div>
    <nav>
      <a href="#">Calculadora</a>
      <a href="#">Emplacamento</a>
      <a href="/estoque.html" class="btn">Estoque</a>
    </nav>
  </header>
  <div class="header-space"></div>

  <!-- ConteÃºdo principal (agora sem 'hidden') -->
  <div id="mainContent">
    <!-- AlternÃ¢ncia de calculadoras -->
    <div class="calc-switch" style="display:flex;justify-content:center;gap:1rem;margin-bottom:1.2rem;">
      <button id="btnEstoqueProprio" class="btn-primary">Estoque De Nigris</button>
      <button id="btnEstoqueFabrica" class="btn-secondary">Estoque FÃ¡brica</button>
    </div>

    <!-- Calculadora Estoque PrÃ³prio -->
    <div id="calcEstoqueProprio">
      <div class="container">
        <div class="header">Calculadora De Nigris</div>
        <div class="card">

          <!-- Campos iniciais -->
          <div class="grid-5">
            <div>Modelo<br><strong id="modelo">â€“</strong></div>
            <div>UP<br><strong id="up">â€“</strong></div>
            <div>
              <label for="fz">FZ</label>
              <input type="text" id="fz" maxlength="6" placeholder="123456"/>
              <div id="fzError"></div>
            </div>
            <div>Ano/Mod<br><strong id="anoMod">â€“</strong></div>
            <div>Valor Tabela<br><strong id="valorTabela">R$ 0,00</strong></div>
          </div>

          <!-- Desconto -->
          <div class="form-group">
            <label for="desconto">Desconto (%)</label>
            <div style="display:flex;align-items:center;gap:0.5rem;">
              <div class="desconto-wrapper">
                <button type="button" id="btnDescontoDown" aria-label="Diminuir desconto">â–¼</button>
                <input type="number" id="desconto" value="0" min="0" max="2" step="0.01" inputmode="decimal">
                <button type="button" id="btnDescontoUp" aria-label="Aumentar desconto">â–²</button>
              </div>
              <!-- NOVO: botÃ£o para ver foto do veÃ­culo (coluna 16 do Sheets) -->
              <button type="button" id="btnVerFoto" class="btn-photo" title="Ver foto do veÃ­culo">ðŸ“· Foto</button>
              <!-- NOVO: botÃ£o para ver informaÃ§Ãµes do veÃ­culo -->
              <button type="button" id="btnVerInfo" class="btn-info" title="Ver informaÃ§Ãµes do veÃ­culo">â„¹</button>
            </div>
          </div>

          <!-- NOVO: InformaÃ§Ãµes adicionais do veÃ­culo -->
          <div id="infoVeiculo" class="hidden" style="background:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:0.5rem;">
            <div style="display:flex;flex-direction:column;gap:0.5rem;">
              <div><strong>Cor:</strong> <span id="infoCor">â€“</span></div>
              <div><strong>Variante:</strong> <span id="infoVariante">â€“</span></div>
              <div><strong>PÃ¡tio:</strong> <span id="infoPatio">â€“</span></div>
            </div>
          </div>

          <!-- Resultados -->
          <div class="results">
            <div class="row">
              <span class="label">Desconto (R$)</span>
              <span id="descontoReais">R$ 0,00</span>
            </div>
            <div class="row">
              <span class="label">Valor de Venda</span>
              <span id="valorVenda">R$ 0,00</span>
            </div>
            <!-- Protegidos -->
            <div class="row hidden" id="rowComissaoProtected">
              <span class="label">ComissÃ£o</span>
              <span id="comissaoProtected">R$ 0,00</span>
            </div>
            <div class="row hidden" id="rowDsrProtected">
              <span class="label">DSR</span>
              <span id="dsrProtected">R$ 0,00</span>
            </div>
            <div class="row hidden" id="rowTotalProtected">
              <span class="label">Total</span>
              <span id="total">R$ 0,00</span>
            </div>
          </div>

          <!-- Detalhamento protegido -->
          <button id="btnMostrarProtegido">Detalhamento</button>

          <!-- Grupo de senha -->
          <div id="passwordGroup" class="hidden">
            <input type="password" id="senhaInput" placeholder="Digite a senha"/>
            <button id="btnVerificarSenha">Confirmar</button>
            <div id="senhaError" style="color:var(--error);font-size:0.85rem;"></div>
          </div>

          <!-- AÃ§Ãµes finais -->
          <div class="actions">
            <a id="linkEmitirPedido" href="https://gd.cimbb.com.br/p/crm/atividades/agenda/" target="_blank" class="btn-primary">
              Emitir Pedido
            </a>
            <a href="https://wa.me/5511950583053" target="_blank" class="btn-secondary">
              Solicitar Reserva
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Calculadora Estoque FÃ¡brica -->
    <div id="calcEstoqueFabrica" class="hidden fabrica-theme">
      <div class="container">
        <div class="header">Calculadora Estoque FÃ¡brica</div>
        <div class="card" style="display:flex;flex-direction:column;gap:1.2rem;align-items:flex-start;">

          <div class="form-group">
            <label for="anoModeloFab">Ano/Modelo:</label>
            <select id="anoModeloFab">
              <option value="">Selecione</option>
              <option value="25/25">25/25</option>
              <option value="25/26">25/26</option>
            </select>
          </div>

          <div class="form-group">
            <label>FamÃ­lia:</label>
            <div id="familiaFab" style="display:flex;gap:1.2rem;flex-wrap:wrap;">
              <label><input type="radio" name="familiaFab" value="Accelo"><span>Accelo</span></label>
              <label><input type="radio" name="familiaFab" value="Atego"><span>Atego</span></label>
              <label><input type="radio" name="familiaFab" value="Actros"><span>Actros</span></label>
              <label><input type="radio" name="familiaFab" value="Axor"><span>Axor</span></label>
              <label><input type="radio" name="familiaFab" value="Arocs"><span>Arocs</span></label>
            </div>
          </div>

          <!-- UP + Variante (corrigido: wrapper var-right) -->
          <div class="form-group variant-group">
            <label for="upFab">UP:</label>
            <select id="upFab"></select>

            <div class="var-right">
              <span class="var-label">Variante:</span>
              <div id="varianteFab" class="var-box"></div>
              <button id="btnCopiarVariante" class="copy-variant" title="Copiar variante">
                <svg id="iconCopiarVariante" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M10 1.5A1.5 1.5 0 0 1 11.5 3v1h-1V3a.5.5 0 0 0-.5-.5h-7A.5.5 0 0 0 2 3v10a.5.5 0 0 0 .5.5H6v1H2.5A1.5 1.5 0 0 1 1 13.5v-10A1.5 1.5 0 0 1 2.5 2h7zm1 3A1.5 1.5 0 0 1 12.5 6v7A1.5 1.5 0 0 1 11 14.5h-5A1.5 1.5 0 0 1 4.5 13V6A1.5 1.5 0 0 1 6 4.5h5zm-5 1A.5.5 0 0 0 6 6v7a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5h-5z"/>
                </svg>
                <svg id="iconCheckVariante" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="display:none;">
                  <path d="M13.485 1.929a1 1 0 0 1 1.415 1.414l-8 8a1 1 0 0 1-1.415 0l-4-4A1 1 0 1 1 2.9 5.929l3.293 3.293 7.293-7.293z"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-group model-group">
            <label for="modeloFab">Modelo:</label>
            <select id="modeloFab"></select>
            <a href="https://truckinfomb.com.br/variantes" target="_blank" class="truckinfo-link">
              <img src="Imagens/truckinfo.png" alt="Truck Info">
            </a>
          </div>

          <div class="form-group">
            <label for="acaoFab">AÃ§Ã£o:</label>
            <select id="acaoFab">
              <option value="">Selecione</option>
              <option value="Estoque">Estoque</option>
              <option value="C.E.ABAST">C.E.ABAST</option>
              <option value="Frigorificado">Frigorificado</option>
              <option value="Postos de Combustiveis">Postos de Combustiveis</option>
              <option value="Mais Alimentos">Mais Alimentos</option>
            </select>
          </div>

          <!-- Card de preÃ§os -->
          <div class="precos-fabrica-card" style="background:#f6f7fa;border-radius:10px;box-shadow:0 1px 4px rgba(40,40,40,0.06);padding:1.1rem 1.3rem 1rem 1.3rem;margin:2rem 0 1.2rem 0;width:100%;border:1px solid #ececec;">
            <div style="display:flex;flex-direction:column;gap:0.7rem;">
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <span style="color:#888;font-weight:500;font-size:0.98rem;">VALOR TABELA</span>
                <span id="faValorTabela" style="color:#222;font-size:1.13rem;font-weight:600;">R$ 0,00</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <span style="color:#888;font-weight:500;font-size:0.98rem;">VALOR VENDA</span>
                <span id="faValorVenda" style="color:#222;font-size:1.13rem;font-weight:600;">R$ 0,00</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <span style="color:#888;font-weight:500;font-size:0.98rem;">DESCONTO</span>
                <span id="faDescontoPerc" style="color:#666;font-size:1.05rem;font-weight:500;">0%</span>
              </div>
            </div>
            <button id="btnDetalhamentoFab" style="margin-top:1.1rem;width:100%;background:#f2f4f8;color:#23408e;border:1px solid #e0e3e8;border-radius:6px;padding:0.65rem 0;font-size:1.03rem;font-weight:600;cursor:pointer;transition:background .18s,color .18s;">
              Detalhamento
            </button>
          </div>

        </div><!-- .card -->
      </div><!-- .container -->
    </div><!-- #calcEstoqueFabrica -->
  </div><!-- #mainContent -->

  <script src="script.js"></script>
</body>
</html>